let () = Dream.run ~interface:"0.0.0.0" ~port:80 @@ Dream.logger @@ Web.Main.app ()

(* let () = *)
(*   let open Web.Planner.Eval in *)
(*   let open Lib in *)
(*   Memtrace.trace_if_requested (); *)
(*   let n = 1_000_000L in *)
(*   let n_cols = 100 in *)
(*   let stream : Data.data_record Seq.t = *)
(*     Seq.init (Int64.to_int n) (fun _ -> *)
(*       Array.init n_cols (fun _ -> `DataInt (Random.int64 n))) *)
(*     |> Seq.take (Int64.to_int n) *)
(*     |> Seq.once *)
(*   in *)
(*   stream *)
(*   |> with_generic_external_sort *)
(*        ~n_workers:2 *)
(*        ~cols:(Array.init n_cols @@ fun i -> Printf.sprintf "col%d" i, `ColInt) *)
(*        ~cmp:compare *)
(*        ~est_size:Data.approx_record_size *)
(*        ~max_group_size:Web.Metastore.Const.buffer_size *)
(*        ~k_way_threshold:5 *)
(*      (*      @@ Seq.iter ignore *) *)
(*      (* ;; *) *)
(*      @@ Seq.iteri (fun i r -> Printf.eprintf "%d: %s\n" i (Data.string_of_record r)) *)
(* ;; *)
